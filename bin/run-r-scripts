#! /bin/bash

# Set permissions so that new files can be deleted/overwritten outside docker
echo "Setting umask to 000"
umask 000

echo "Setting directory"
cd ./bound
echo "Current directory: $(pwd)"

echo "Listing files"
ls -lR

echo "Creating a file"
echo "hello world" >> /bound/working_dir/30_Processed_Inputs/hello.txt

echo "listing files in working_dir"
ls -lR working_dir

echo "catting file"
cat /bound/working_dir/30_Processed_Inputs/hello.txt

echo "Running R script"
Rscript --vanilla web_tool_script_X.R "${1:-1234}" \
  && Rscript --vanilla web_tool_script_1.R "${1:-1234}"

echo "Listing files after R script"
ls -lR

cat /bound/working_dir/30_Processed_Inputs/rmi_pacta_2022q4_general/coveragegraphlegend.json

# Rscript --vanilla web_tool_script_1.R "${1:-1234}" \
#   && Rscript --vanilla web_tool_script_2.R "${1:-1234}" \
#   && Rscript --no-save --no-restore --no-site-file --no-environ web_tool_script_3.R "${1:-1234}"
